<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Suddenrun</title>
    <script crossorigin="anonymous"
            integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
            src="https://code.jquery.com/jquery-3.6.4.js"></script>
    <style>
        body {
            display: flex;
            gap: 1rem;
        }
    </style>
</head>
<body>
<div class="container-md border" id="embed-iframe"></div>
<script async src="https://open.spotify.com/embed-podcast/iframe-api/v1"></script>
<script type="text/javascript">
    function sendRequest(type, url, body) {
        const request = new XMLHttpRequest();
        request.open(type, url, false);
        request.send(body);
        if (request.status === 200) {
            return request.responseText;
        } else {
            throw new Error('Request failed: ' + request.statusText);
        }
    }

    function getPlaylist() {
        const response = sendRequest('POST', 'http://localhost:8082/api/v1/playlists', null);
        return JSON.parse(response)
    }

    function createPlaylistUri(id) {
        return 'spotify:playlist:' + id
    }

    window.onSpotifyIframeApiReady = (IFrameAPI) => {
        // const playlist = getPlaylist();
        // const playlistId = playlist['id']
        // const playlistUri = createPlaylistUri(playlistId)
        const element = document.getElementById('embed-iframe');
        const options = {
            width: '100%',
            height: '200',
            uri: '5DM6LGmTx9SbitpkiTbuOJ'
            // uri: playlistUri
        };
        const callback = (EmbedController) => {
        };
        IFrameAPI.createController(element, options, callback);
    };

</script>
</body>
</html>